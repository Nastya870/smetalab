# Production Smoke Tests

## –û–ø–∏—Å–∞–Ω–∏–µ

Production Smoke Tests ‚Äî —ç—Ç–æ –Ω–∞–±–æ—Ä –±–µ–∑–æ–ø–∞—Å–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ production –æ–∫—Ä—É–∂–µ–Ω–∏—è. 

**–ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- ‚úÖ –ù–ï —Å–æ–∑–¥–∞—é—Ç –¥–∞–Ω–Ω—ã–µ –≤ —Ä–µ–∞–ª—å–Ω–æ–π –ë–î
- ‚úÖ –ù–ï –∏–∑–º–µ–Ω—è—é—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–∞
- ‚úÖ –¢–æ–ª—å–∫–æ –ø—Ä–æ–≤–µ—Ä—è—é—Ç –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω—ã –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –Ω–∞ production

---

## –ó–∞–ø—É—Å–∫

### –ë–∞–∑–æ–≤—ã–π –∑–∞–ø—É—Å–∫ (–ø—Ä–æ—Ç–∏–≤ —Ç–µ–∫—É—â–µ–≥–æ production)

```bash
npm run test:prod
```

### –ó–∞–ø—É—Å–∫ –ø—Ä–æ—Ç–∏–≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ URL

```bash
PROD_URL=https://your-custom-url.vercel.app npm run test:prod
```

### –ó–∞–ø—É—Å–∫ –≤ Windows PowerShell

```powershell
$env:PROD_URL="https://your-custom-url.vercel.app"; npm run test:prod
```

---

## –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è

### 1. Health & Availability (–î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å)
| –¢–µ—Å—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|----------|
| Health check | –ü—Ä–æ–≤–µ—Ä–∫–∞ /api/health endpoint |
| Root URL | –î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –∫–æ—Ä–Ω–µ–≤–æ–≥–æ URL |
| API response | –ü—Ä–æ–≤–µ—Ä–∫–∞ —á—Ç–æ API –æ—Ç–≤–µ—á–∞–µ—Ç |

### 2. HTTPS & SSL
| –¢–µ—Å—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|----------|
| HTTPS | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∑–∞—â–∏—â—ë–Ω–Ω–æ–≥–æ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ |
| HTTP redirect | –†–µ–¥–∏—Ä–µ–∫—Ç —Å HTTP –Ω–∞ HTTPS |

### 3. Security Headers
| Header | –û–ø–∏—Å–∞–Ω–∏–µ | –í–∞–∂–Ω–æ—Å—Ç—å |
|--------|----------|----------|
| X-Content-Type-Options | –ó–∞—â–∏—Ç–∞ –æ—Ç MIME sniffing | –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è |
| X-Frame-Options | –ó–∞—â–∏—Ç–∞ –æ—Ç clickjacking | –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è |
| Strict-Transport-Security | HSTS –¥–ª—è –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–≥–æ HTTPS | –í–∞–∂–Ω–æ |
| Content-Security-Policy | CSP –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç XSS | –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è |
| X-Powered-By | –ù–ï –¥–æ–ª–∂–µ–Ω —Ä–∞—Å–∫—Ä—ã–≤–∞—Ç—å—Å—è | –í–∞–∂–Ω–æ |

### 4. API Security
| –¢–µ—Å—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|----------|
| Protected endpoints | –¢—Ä–µ–±—É—é—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ |
| Invalid JWT | –û—Ç–∫–ª–æ–Ω—è–µ—Ç—Å—è –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–π —Ç–æ–∫–µ–Ω |
| No token | –û—Ç–∫–ª–æ–Ω—è—é—Ç—Å—è –∑–∞–ø—Ä–æ—Å—ã –±–µ–∑ —Ç–æ–∫–µ–Ω–∞ |

### 5. Rate Limiting
| –¢–µ—Å—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|----------|
| Rate Limit headers | –ù–∞–ª–∏—á–∏–µ RateLimit-* headers |

### 6. Error Handling
| –¢–µ—Å—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|----------|
| 404 response | –ö–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –æ—Ç–≤–µ—Ç –¥–ª—è –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö routes |
| No stack traces | Stack traces –ù–ï —Ä–∞—Å–∫—Ä—ã–≤–∞—é—Ç—Å—è –≤ production |

### 7. CORS
| –¢–µ—Å—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|----------|
| OPTIONS preflight | –û–±—Ä–∞–±–æ—Ç–∫–∞ preflight –∑–∞–ø—Ä–æ—Å–æ–≤ |

### 8. Performance
| –¢–µ—Å—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|----------|
| Response time | API –æ—Ç–≤–µ—á–∞–µ—Ç –º–µ–Ω–µ–µ —á–µ–º –∑–∞ 3 —Å–µ–∫—É–Ω–¥—ã |

---

## –ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞

```
‚úì Production Smoke Tests > Health & Availability > –¥–æ–ª–∂–µ–Ω –æ—Ç–≤–µ—á–∞—Ç—å –Ω–∞ health check
‚úì Production Smoke Tests > HTTPS & SSL > –¥–æ–ª–∂–µ–Ω –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å HTTPS
‚úì Production Smoke Tests > Security Headers > –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å HSTS
‚úÖ HSTS: max-age=63072000; includeSubDomains; preload
‚úì Production Smoke Tests > API Security > –¥–æ–ª–∂–µ–Ω —Ç—Ä–µ–±–æ–≤–∞—Ç—å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é
‚úì Production Smoke Tests > Performance > API –¥–æ–ª–∂–µ–Ω –æ—Ç–≤–µ—á–∞—Ç—å –º–µ–Ω–µ–µ —á–µ–º –∑–∞ 3 —Å–µ–∫—É–Ω–¥—ã
üìä –í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞: 45ms

Test Files  1 passed (1)
     Tests  19 passed (19)
  Duration  2.5s
```

---

## –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è (Warnings)

–¢–µ—Å—Ç—ã –º–æ–≥—É—Ç –≤—ã–≤–æ–¥–∏—Ç—å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è ‚Äî —ç—Ç–æ –Ω–µ –æ—à–∏–±–∫–∏, –∞ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:

| –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ | –ß—Ç–æ –¥–µ–ª–∞—Ç—å |
|----------------|------------|
| `‚ö†Ô∏è X-Content-Type-Options header –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç` | –î–æ–±–∞–≤–∏—Ç—å –≤ Vercel/server config |
| `‚ö†Ô∏è CSP header –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç` | –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Content-Security-Policy |
| `‚ö†Ô∏è Rate Limit headers –Ω–µ –Ω–∞–π–¥–µ–Ω—ã` | –ú–æ–∂–µ—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å—Å—è –Ω–∞ edge level |

---

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é | –û–ø–∏—Å–∞–Ω–∏–µ |
|------------|--------------|----------|
| `PROD_URL` | `https://vite-g3f2z4942-ilyas-projects-5a5f05a9.vercel.app` | URL production —Å–µ—Ä–≤–µ—Ä–∞ |

---

## –ö–æ–≥–¥–∞ –∑–∞–ø—É—Å–∫–∞—Ç—å

| –°–æ–±—ã—Ç–∏–µ | –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è |
|---------|--------------|
| –ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è | ‚úÖ –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ |
| –ü–µ—Ä–µ–¥ —Ä–µ–ª–∏–∑–æ–º | ‚úÖ –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ |
| –†–µ–≥—É–ª—è—Ä–Ω–æ (daily) | ‚úÖ –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è |
| –ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã | ‚úÖ –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ |

---

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å CI/CD

### GitHub Actions

```yaml
- name: Production Smoke Tests
  run: npm run test:prod
  env:
    PROD_URL: ${{ secrets.PRODUCTION_URL }}
```

### –ü–æ—Å–ª–µ Vercel Deploy

```yaml
- name: Deploy to Vercel
  run: npx vercel --prod --token ${{ secrets.VERCEL_TOKEN }}
  
- name: Smoke Tests
  run: npm run test:prod
```

---

## –û—Ç–ª–∏—á–∏—è –æ—Ç –ª–æ–∫–∞–ª—å–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤

| –ê—Å–ø–µ–∫—Ç | –õ–æ–∫–∞–ª—å–Ω–æ | Production |
|--------|----------|------------|
| –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö | –¢–µ—Å—Ç–æ–≤–∞—è | –†–µ–∞–ª—å–Ω–∞—è (—Ç–æ–ª—å–∫–æ —á—Ç–µ–Ω–∏–µ) |
| –°–∫–æ—Ä–æ—Å—Ç—å | –ë—ã—Å—Ç—Ä–æ | –°–µ—Ç–µ–≤—ã–µ –∑–∞–¥–µ—Ä–∂–∫–∏ |
| SSL | –û–±—ã—á–Ω–æ –Ω–µ—Ç | –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ HTTPS |
| Rate Limiting | –ú–æ–∂–µ—Ç –Ω–µ —Ä–∞–±–æ—Ç–∞—Ç—å | –†–∞–±–æ—Ç–∞–µ—Ç –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ |

---

## –§–∞–π–ª—ã

```
tests/production/
‚îú‚îÄ‚îÄ README.md          # –≠—Ç–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îî‚îÄ‚îÄ smoke.test.js      # Smoke —Ç–µ—Å—Ç—ã (19 —Ç–µ—Å—Ç–æ–≤)
```

---

## –°–≤—è–∑–∞–Ω–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –í—Å–µ —Ç–µ—Å—Ç—ã
npm test

# –¢–æ–ª—å–∫–æ unit —Ç–µ—Å—Ç—ã
npm run test:unit

# –¢–æ–ª—å–∫–æ integration —Ç–µ—Å—Ç—ã  
npm run test:integration

# –¢–æ–ª—å–∫–æ security —Ç–µ—Å—Ç—ã
npm run test:security

# –¢–æ–ª—å–∫–æ production smoke —Ç–µ—Å—Ç—ã
npm run test:prod

# E2E —Ç–µ—Å—Ç—ã (Playwright)
npm run test:e2e
```
