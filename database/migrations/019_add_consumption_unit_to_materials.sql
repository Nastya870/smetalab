-- ============================================
-- –ú–ò–ì–†–ê–¶–ò–Ø: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–æ–ª–æ–Ω–∫–∏ consumption_unit –∫ —Ç–∞–±–ª–∏—Ü–µ materials
-- –î–∞—Ç–∞: 19.10.2025
-- –û–ø–∏—Å–∞–Ω–∏–µ: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –µ–¥–∏–Ω–∏—Ü—ã –∏–∑–º–µ—Ä–µ–Ω–∏—è —Ä–∞—Å—Ö–æ–¥–∞ –º–∞—Ç–µ—Ä–∏–∞–ª–∞
-- ============================================

-- –î–æ–±–∞–≤–ª—è–µ–º –∫–æ–ª–æ–Ω–∫—É consumption_unit (–µ–¥–∏–Ω–∏—Ü–∞ –∏–∑–º–µ—Ä–µ–Ω–∏—è —Ä–∞—Å—Ö–æ–¥–∞)
ALTER TABLE materials 
ADD COLUMN IF NOT EXISTS consumption_unit VARCHAR(50);

-- –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∫ –Ω–æ–≤–æ–π –∫–æ–ª–æ–Ω–∫–µ
COMMENT ON COLUMN materials.consumption_unit IS '–ï–¥–∏–Ω–∏—Ü–∞ –∏–∑–º–µ—Ä–µ–Ω–∏—è —Ä–∞—Å—Ö–æ–¥–∞ –º–∞—Ç–µ—Ä–∏–∞–ª–∞ (–º¬≤, –º¬≥, —à—Ç, –∫–≥ –∏ —Ç.–¥.). –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö —Ä–∞—Å—á—ë—Ç–æ–≤. –ù–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ UI —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∞.';

-- –°–æ–∑–¥–∞—ë–º –∏–Ω–¥–µ–∫—Å –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
-- CREATE INDEX IF NOT EXISTS idx_materials_consumption_unit ON materials(consumption_unit);

-- –£—Å–ø–µ—à–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏
DO $$
BEGIN
  RAISE NOTICE '‚úÖ –ö–æ–ª–æ–Ω–∫–∞ consumption_unit –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ —Ç–∞–±–ª–∏—Ü—É materials';
  RAISE NOTICE '';
  RAISE NOTICE 'üìù –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:';
  RAISE NOTICE '   ‚Ä¢ –¢–∏–ø: VARCHAR(50)';
  RAISE NOTICE '   ‚Ä¢ –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –µ–¥–∏–Ω–∏—Ü–∞ –∏–∑–º–µ—Ä–µ–Ω–∏—è —Ä–∞—Å—Ö–æ–¥–∞';
  RAISE NOTICE '   ‚Ä¢ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ UI: –ù–ï–¢ (—Å–∫—Ä—ã—Ç–æ)';
  RAISE NOTICE '   ‚Ä¢ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è: –¥–ª—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö —Ä–∞—Å—á—ë—Ç–æ–≤';
END $$;
