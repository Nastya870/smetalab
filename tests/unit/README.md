# Unit –¢–µ—Å—Ç—ã - Smeta Application

## üìã –û–±–∑–æ—Ä

Unit —Ç–µ—Å—Ç—ã –ø—Ä–æ–≤–µ—Ä—è—é—Ç –æ—Ç–¥–µ–ª—å–Ω—ã–µ –º–æ–¥—É–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ –∏–∑–æ–ª—è—Ü–∏–∏. –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –º–æ–∫–∏ –¥–ª—è –∏–º–∏—Ç–∞—Ü–∏–∏ –≤–Ω–µ—à–Ω–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (–ë–î, HTTP, —Ñ–∞–π–ª–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞).

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

| –ú–µ—Ç—Ä–∏–∫–∞ | –ó–Ω–∞—á–µ–Ω–∏–µ |
|---------|----------|
| **–í—Å–µ–≥–æ —Ç–µ—Å—Ç–æ–≤** | 67 |
| **–§–∞–π–ª–æ–≤ —Ç–µ—Å—Ç–æ–≤** | 4 |
| **–ü–æ–∫—Ä—ã—Ç–∏–µ** | 100% |
| **–§—Ä–µ–π–º–≤–æ—Ä–∫** | Vitest |

## üèóÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞

```
tests/unit/
‚îú‚îÄ‚îÄ README.md                              # ‚Üê –í–´ –ó–î–ï–°–¨
‚îÇ
‚îú‚îÄ‚îÄ backend/                               # Backend —Ç–µ—Å—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ middleware/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth.test.js                   # JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (19 —Ç–µ—Å—Ç–æ–≤)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ checkPermission.test.js        # –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ (23 —Ç–µ—Å—Ç–∞)
‚îÇ   ‚îî‚îÄ‚îÄ utils/
‚îÇ       ‚îî‚îÄ‚îÄ password.test.js               # –•–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π (21 —Ç–µ—Å—Ç)
‚îÇ
‚îú‚îÄ‚îÄ frontend/utils/                        # Frontend —Ç–µ—Å—Ç—ã (–ø—É—Å—Ç–æ)
‚îÇ
‚îú‚îÄ‚îÄ shared/
‚îÇ   ‚îî‚îÄ‚îÄ fullTextSearch.test.js             # –ü–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫ (11 —Ç–µ—Å—Ç–æ–≤)
‚îÇ
‚îî‚îÄ‚îÄ docs/
    ‚îî‚îÄ‚îÄ README.md                          # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

## üöÄ –ó–∞–ø—É—Å–∫

```powershell
# –í—Å–µ unit —Ç–µ—Å—Ç—ã
npm run test:unit

# –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ñ–∞–π–ª
npx vitest run tests/unit/backend/middleware/auth.test.js

# –í watch —Ä–µ–∂–∏–º–µ
npx vitest watch tests/unit

# –° coverage
npm run test:coverage

# UI —Ä–µ–∂–∏–º
npm run test:ui
```

---

## üìù –û–ø–∏—Å–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤

### 1. `auth.test.js` ‚Äî JWT –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

**–ü—É—Ç—å:** `tests/unit/backend/middleware/auth.test.js`  
**–¢–µ—Å—Ç–∏—Ä—É–µ—Ç:** `server/middleware/auth.js`  
**–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–µ—Å—Ç–æ–≤:** 19

#### Middleware: `authenticateToken`

| –¢–µ—Å—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|----------|
| ‚ùå –ù–µ—Ç —Ç–æ–∫–µ–Ω–∞ | –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç 401 –µ—Å–ª–∏ –Ω–µ—Ç Authorization header |
| ‚ùå –ü—É—Å—Ç–æ–π —Ç–æ–∫–µ–Ω | –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç 401 –µ—Å–ª–∏ Authorization header –ø—É—Å—Ç–æ–π |
| ‚ùå –ë–µ–∑ Bearer | –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç 401 –µ—Å–ª–∏ –Ω–µ—Ç –ø—Ä–µ—Ñ–∏–∫—Å–∞ Bearer |
| ‚ùå –ù–µ–≤–∞–ª–∏–¥–Ω—ã–π —Ç–æ–∫–µ–Ω | –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç 403 –µ—Å–ª–∏ —Ç–æ–∫–µ–Ω –Ω–µ –ø—Ä–æ—Ö–æ–¥–∏—Ç –ø—Ä–æ–≤–µ—Ä–∫—É |
| ‚ùå –ò—Å—Ç—ë–∫—à–∏–π —Ç–æ–∫–µ–Ω | –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç 401 —Å –∫–æ–¥–æ–º TOKEN_EXPIRED |
| ‚úÖ –í–∞–ª–∏–¥–Ω—ã–π —Ç–æ–∫–µ–Ω | –î–æ–±–∞–≤–ª—è–µ—Ç user –≤ req –∏ –≤—ã–∑—ã–≤–∞–µ—Ç next() |
| ‚úÖ Super Admin | –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç super admin —Ç–æ–∫–µ–Ω |
| ‚ö†Ô∏è –ë–µ–∑ permissions | –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –ø—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤ –¥–ª—è —Å—Ç–∞—Ä–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∞ |
| üìã –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ | –õ–æ–≥–∏—Ä—É–µ—Ç —É—Å–ø–µ—à–Ω—É—é –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é |

#### Middleware: `optionalAuth`

| –¢–µ—Å—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|----------|
| ‚úÖ –ù–µ—Ç —Ç–æ–∫–µ–Ω–∞ | –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç req.user = null, –≤—ã–∑—ã–≤–∞–µ—Ç next() |
| ‚úÖ –í–∞–ª–∏–¥–Ω—ã–π —Ç–æ–∫–µ–Ω | –î–æ–±–∞–≤–ª—è–µ—Ç user –≤ req |
| ‚úÖ –ù–µ–≤–∞–ª–∏–¥–Ω—ã–π —Ç–æ–∫–µ–Ω | –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç req.user = null, –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç |
| ‚úÖ –ò—Å—Ç—ë–∫—à–∏–π —Ç–æ–∫–µ–Ω | –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç req.user = null, –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç |

#### –ü—Ä–∏–º–µ—Ä —Ç–µ—Å—Ç–∞:

```javascript
it('–¥–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å 401 –µ—Å–ª–∏ –Ω–µ—Ç Authorization header', () => {
  authenticateToken(req, res, next);

  expect(res.status).toHaveBeenCalledWith(401);
  expect(res.json).toHaveBeenCalledWith({
    success: false,
    message: '–¢–æ–∫–µ–Ω –Ω–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω',
  });
  expect(next).not.toHaveBeenCalled();
});
```

---

### 2. `checkPermission.test.js` ‚Äî –°–∏—Å—Ç–µ–º–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π

**–ü—É—Ç—å:** `tests/unit/backend/middleware/checkPermission.test.js`  
**–¢–µ—Å—Ç–∏—Ä—É–µ—Ç:** `server/middleware/checkPermission.js`  
**–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–µ—Å—Ç–æ–≤:** 23

#### –ò–µ—Ä–∞—Ä—Ö–∏—è —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π

```
admin.*           ‚Üí users, roles, tenants, permissions
references.*      ‚Üí materials, works, counterparties, work_materials
projects.*        ‚Üí estimates, estimate_templates, purchases, schedules
```

#### –ì—Ä—É–ø–ø—ã —Ç–µ—Å—Ç–æ–≤:

| –ì—Ä—É–ø–ø–∞ | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∏–º–µ—Ä—ã |
|--------|----------|---------|
| **Super Admin** | –ü–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø | `isSuperAdmin: true` ‚Üí –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç –ª—é–±—É—é –ø—Ä–æ–≤–µ—Ä–∫—É |
| **–ü—Ä—è–º–æ–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ** | –¢–æ—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ | `projects.read` ‚Üí projects.read ‚úÖ |
| **–ò–µ—Ä–∞—Ä—Ö–∏—è admin** | –ù–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ | `admin.read` ‚Üí users.read ‚úÖ |
| **–ò–µ—Ä–∞—Ä—Ö–∏—è references** | –ù–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ | `references.create` ‚Üí works.create ‚úÖ |
| **–ò–µ—Ä–∞—Ä—Ö–∏—è projects** | –ù–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ | `projects.update` ‚Üí purchases.update ‚úÖ |
| **–û—Ç–∫–∞–∑ –≤ –¥–æ—Å—Ç—É–ø–µ** | –ù–µ—Ç –ø—Ä–∞–≤ | `projects.read` ‚Üí users.delete ‚ùå (403) |
| **–ù–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è** | req.user = null | ‚Üí 403 |
| **Wildcard** | admin.* | –í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å admin |
| **–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ** | –ù–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–∞–≤ | –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞–∂–¥–æ–≥–æ |

#### REGRESSION TEST (21.11.2025):

```javascript
it('REGRESSION TEST: super_admin —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ —Ä–æ–ª—è–º–∏ –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å –ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø', () => {
  req.user = {
    userId: 1,
    roles: ['super_admin', 'admin'], // –ù–µ—Å–∫–æ–ª—å–∫–æ —Ä–æ–ª–µ–π
    isSuperAdmin: true,
    permissions: [{ key: 'admin.create' }],
  };

  // Super admin –¥–æ–ª–∂–µ–Ω –ø—Ä–æ–π—Ç–∏ –õ–Æ–ë–£–Æ –ø—Ä–æ–≤–µ—Ä–∫—É
  const criticalChecks = [
    checkPermission('users', 'delete'),
    checkPermission('roles', 'delete'),
  ];

  criticalChecks.forEach(mw => {
    mw(req, res, next);
    expect(next).toHaveBeenCalled();
  });
});
```

---

### 3. `password.test.js` ‚Äî –ü–∞—Ä–æ–ª–∏

**–ü—É—Ç—å:** `tests/unit/backend/utils/password.test.js`  
**–¢–µ—Å—Ç–∏—Ä—É–µ—Ç:** `server/utils/password.js`  
**–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–µ—Å—Ç–æ–≤:** 21

#### –§—É–Ω–∫—Ü–∏—è: `validatePassword`

| –¢–µ—Å—Ç | –ü–∞—Ä–æ–ª—å | –†–µ–∑—É–ª—å—Ç–∞—Ç |
|------|--------|-----------|
| ‚úÖ –í–∞–ª–∏–¥–Ω—ã–π | `Test123!@#` | valid: true |
| ‚úÖ –ú–∏–Ω–∏–º—É–º 8 | `Aa1!Aa1!` | valid: true |
| ‚úÖ –î–ª–∏–Ω–Ω—ã–π | `MyV3ry$ecureP@ssw0rd` | valid: true |
| ‚ùå –ö–æ—Ä–æ—Ç–∫–∏–π | `Test1!` | "–º–∏–Ω–∏–º—É–º 8 —Å–∏–º–≤–æ–ª–æ–≤" |
| ‚ùå –ë–µ–∑ –∑–∞–≥–ª–∞–≤–Ω—ã—Ö | `test123!@#` | "–∑–∞–≥–ª–∞–≤–Ω—ã–µ –∏ —Å—Ç—Ä–æ—á–Ω—ã–µ" |
| ‚ùå –ë–µ–∑ —Å—Ç—Ä–æ—á–Ω—ã—Ö | `TEST123!@#` | "–∑–∞–≥–ª–∞–≤–Ω—ã–µ –∏ —Å—Ç—Ä–æ—á–Ω—ã–µ" |
| ‚ùå –ë–µ–∑ —Ü–∏—Ñ—Ä | `TestTest!@#` | "—Ö–æ—Ç—è –±—ã –æ–¥–Ω—É —Ü–∏—Ñ—Ä—É" |
| ‚ùå –ë–µ–∑ —Å–ø–µ—Ü—Å–∏–º–≤–æ–ª–æ–≤ | `Test12345` | "—Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω —Å–ø–µ—Ü—Å–∏–º–≤–æ–ª" |
| ‚ùå null/undefined | null | "–º–∏–Ω–∏–º—É–º 8 —Å–∏–º–≤–æ–ª–æ–≤" |

#### –§—É–Ω–∫—Ü–∏–∏: `hashPassword` / `comparePassword`

| –¢–µ—Å—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|----------|
| üîê –•–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ | –°–æ–∑–¥–∞—ë—Ç bcrypt —Ö–µ—à ($2b$...) |
| üîê –†–∞–∑–Ω—ã–µ —Å–æ–ª–∏ | –û–¥–∏–Ω –ø–∞—Ä–æ–ª—å ‚Üí —Ä–∞–∑–Ω—ã–µ —Ö–µ—à–∏ |
| ‚úÖ –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è | –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–∞—Ä–æ–ª—å ‚Üí true |
| ‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π –ø–∞—Ä–æ–ª—å | –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π ‚Üí false |
| üîê –î–ª–∏–Ω–Ω—ã–µ –ø–∞—Ä–æ–ª–∏ | –†–∞–±–æ—Ç–∞–µ—Ç —Å 50+ —Å–∏–º–≤–æ–ª–∞–º–∏ |
| ‚ùå –û–¥–∏–Ω —Å–∏–º–≤–æ–ª | –û—Ç–ª–∏—á–∏–µ –≤ –æ–¥–Ω–æ–º —Å–∏–º–≤–æ–ª–µ ‚Üí false |
| ‚ö° Performance | < 500ms –Ω–∞ —Ö–µ—à –∏ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ |

#### –ü—Ä–∏–º–µ—Ä:

```javascript
it('–¥–æ–ª–∂–µ–Ω —Ö—ç—à–∏—Ä–æ–≤–∞—Ç—å –ø–∞—Ä–æ–ª—å', async () => {
  const password = 'Test123!@#';
  const hash = await hashPassword(password);

  expect(hash).toBeDefined();
  expect(hash).not.toBe(password);
  expect(hash).toMatch(/^\$2[aby]\$/); // bcrypt —Ñ–æ—Ä–º–∞—Ç
});
```

---

### 4. `fullTextSearch.test.js` ‚Äî –ü–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫

**–ü—É—Ç—å:** `tests/unit/shared/fullTextSearch.test.js`  
**–¢–µ—Å—Ç–∏—Ä—É–µ—Ç:** `shared/lib/utils/fullTextSearch.js`  
**–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–µ—Å—Ç–æ–≤:** 11

#### –§—É–Ω–∫—Ü–∏–∏:

| –§—É–Ω–∫—Ü–∏—è | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|----------|
| `fullTextSearch` | –ü–æ–∏—Å–∫ –ø–æ –º–∞—Å—Å–∏–≤—É –æ–±—ä–µ–∫—Ç–æ–≤ |
| `fullTextSearchWithScore` | –ü–æ–∏—Å–∫ —Å —Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏–µ–º |
| `highlightMatches` | –ü–æ–¥—Å–≤–µ—Ç–∫–∞ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π |

#### –¢–µ—Å—Ç—ã:

| –¢–µ—Å—Ç | –ó–∞–ø—Ä–æ—Å | –û–∂–∏–¥–∞–Ω–∏–µ |
|------|--------|----------|
| –û–¥–Ω–æ —Å–ª–æ–≤–æ | "–¥–µ–º–æ–Ω—Ç–∞–∂" | –í—Å–µ —Å "–¥–µ–º–æ–Ω—Ç–∞–∂" |
| –î–≤–∞ —Å–ª–æ–≤–∞ | "–¥–µ–º–æ–Ω—Ç–∞–∂ —Å—Ç—è–∂–∫–∏" | –û–±–∞ —Å–ª–æ–≤–∞ |
| –¢—Ä–∏ —Å–ª–æ–≤–∞ | "–ø–æ–∫—Ä–∞—Å–∫–∞ —Å—Ç–µ–Ω –∫—Ä–∞—Å–∫–æ–π" | –í—Å–µ —Ç—Ä–∏ |
| –ù–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–µ–µ | "xyz –∞–±–≤" | [] (–ø—É—Å—Ç–æ) |
| –ü—É—Å—Ç–æ–π –∑–∞–ø—Ä–æ—Å | "" | –í—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã |
| Case insensitive | "–î–ï–ú–û–ù–¢–ê–ñ" | –†–µ–≥–∏—Å—Ç—Ä–æ–Ω–µ–∑–∞–≤–∏—Å–∏–º–æ |
| –° —Ä–µ–π—Ç–∏–Ω–≥–æ–º | "–¥–µ–º–æ–Ω—Ç–∞–∂" | –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ score |
| –ü–æ–¥—Å–≤–µ—Ç–∫–∞ | "–ø–æ–∫—Ä–∞—Å–∫–∞ —Å—Ç–µ–Ω" | –ú–∞—Å—Å–∏–≤ —Å match: true |

#### –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ:

```javascript
const testWorks = [
  { id: 1, name: '–î–µ–º–æ–Ω—Ç–∞–∂ —Ü–µ–º–µ–Ω—Ç–Ω–æ–π —Å—Ç—è–∂–∫–∏ –¥–æ 5 —Å–º', code: '0-13' },
  { id: 2, name: '–î–µ–º–æ–Ω—Ç–∞–∂ —Å—Ç—è–∂–∫–∏ –ø–æ–ª–∞', code: '0-14' },
  { id: 5, name: '–ü–æ–∫—Ä–∞—Å–∫–∞ —Å—Ç–µ–Ω –≤–æ–¥–æ—ç–º—É–ª—å—Å–∏–æ–Ω–Ω–æ–π –∫—Ä–∞—Å–∫–æ–π', code: '5-01' },
  // ...
];
```

---

## üîß –ú–æ–∫–∏

Unit —Ç–µ—Å—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç –º–æ–∫–∏ –¥–ª—è –∏–∑–æ–ª—è—Ü–∏–∏:

```javascript
// –ú–æ–∫ JWT utils
vi.mock('../../../../server/utils/jwt.js', () => ({
  verifyAccessToken: vi.fn(),
}));

// –ú–æ–∫ console
vi.spyOn(console, 'log').mockImplementation(() => {});
```

## üìà Best Practices

1. **–ò–∑–æ–ª—è—Ü–∏—è** ‚Äî –∫–∞–∂–¥—ã–π —Ç–µ—Å—Ç –Ω–µ–∑–∞–≤–∏—Å–∏–º
2. **–ú–æ–∫–∏** ‚Äî –≤–Ω–µ—à–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∑–∞–º–æ–∫–∞–Ω—ã
3. **–û—á–∏—Å—Ç–∫–∞** ‚Äî `afterEach(() => vi.clearAllMocks())`
4. **–ì—Ä–∞–Ω–∏—á–Ω—ã–µ —Å–ª—É—á–∞–∏** ‚Äî null, undefined, –ø—É—Å—Ç—ã–µ —Å—Ç—Ä–æ–∫–∏
5. **–†–µ–≥—Ä–µ—Å—Å–∏–∏** ‚Äî —Ç–µ—Å—Ç—ã –Ω–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –±–∞–≥–∏

## üêõ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –¢–µ—Å—Ç –ø–∞–¥–∞–µ—Ç —Å "Cannot find module"

```powershell
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—É—Ç–∏ –∏–º–ø–æ—Ä—Ç–æ–≤
# –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–µ –ø—É—Ç–∏ –æ—Ç —Ñ–∞–π–ª–∞ —Ç–µ—Å—Ç–∞
import { func } from '../../../../server/utils/file.js';
```

### –ú–æ–∫ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

```javascript
// –ú–æ–∫ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –î–û –∏–º–ø–æ—Ä—Ç–∞ —Ç–µ—Å—Ç–∏—Ä—É–µ–º–æ–≥–æ –º–æ–¥—É–ª—è
vi.mock('module-path');
import { tested } from 'tested-module';
```

### –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã —Ç–∞–π–º–∞—É—Ç—è—Ç

```javascript
it('async test', async () => {
  // –£–≤–µ–ª–∏—á—å—Ç–µ —Ç–∞–π–º–∞—É—Ç
}, 10000);
```

---

## üìö –°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

- [tests/README.md](../README.md) ‚Äî –ì–ª–∞–≤–Ω—ã–π –≥–∞–π–¥
- [tests/integration/README.md](../integration/README.md) ‚Äî Integration —Ç–µ—Å—Ç—ã
- [tests/e2e/README.md](../e2e/README.md) ‚Äî E2E —Ç–µ—Å—Ç—ã
- [docs/TESTING_STRATEGY.md](../docs/TESTING_STRATEGY.md) ‚Äî –°—Ç—Ä–∞—Ç–µ–≥–∏—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

---

*–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: –î–µ–∫–∞–±—Ä—å 2025*
