# üìã –°–ü–†–ê–í–ö–ê –ü–û –ü–†–û–ï–ö–¢–£ SMETA-LAB

## üéØ –û–ü–ò–°–ê–ù–ò–ï –ü–†–û–ï–ö–¢–ê

**SMETA-LAB** - –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å—Ç—Ä–æ–∏—Ç–µ–ª—å–Ω—ã–º–∏ —Å–º–µ—Ç–∞–º–∏, –ø—Ä–æ–µ–∫—Ç–∞–º–∏ –∏ –∑–∞–∫—É–ø–∫–∞–º–∏ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –º—É–ª—å—Ç–∏—Ç–µ–Ω–∞–Ω—Ç–Ω–æ—Å—Ç–∏ (multi-tenant SaaS).

**–û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
- –°–æ–∑–¥–∞–Ω–∏–µ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ç—Ä–æ–∏—Ç–µ–ª—å–Ω—ã–º–∏ —Å–º–µ—Ç–∞–º–∏
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞–º–∏ –∏ –∫–æ–º–∞–Ω–¥–∞–º–∏
- –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏ —Ä–∞–±–æ—Ç –∏ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–∫—É–ø–∫–∞–º–∏ –∏ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞–º–∏
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∞–∫—Ç–æ–≤ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö —Ä–∞–±–æ—Ç (–ö–°-2, –ö–°-3)
- –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–æ–≥–æ–≤–æ—Ä–æ–≤ –∏ –≥—Ä–∞—Ñ–∏–∫–æ–≤ —Ä–∞–±–æ—Ç
- –†–æ–ª–µ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ –¥–æ—Å—Ç—É–ø–∞ (RBAC)
- –ú—É–ª—å—Ç–∏—Ç–µ–Ω–∞–Ω—Ç–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (–∫–∞–∂–¥–∞—è –∫–æ–º–ø–∞–Ω–∏—è –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–∞)

---

## üõ†Ô∏è –¢–ï–•–ù–û–õ–û–ì–ò–ß–ï–°–ö–ò–ô –°–¢–ï–ö

### **Frontend**

**–§—Ä–µ–π–º–≤–æ—Ä–∫ –∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏:**
- **React 18.3.1** - –æ—Å–Ω–æ–≤–Ω–æ–π UI —Ñ—Ä–µ–π–º–≤–æ—Ä–∫
- **Vite 6.0.7** - —Å–±–æ—Ä—â–∏–∫ –∏ dev-—Å–µ—Ä–≤–µ—Ä (–ø–æ—Ä—Ç 5173)
- **React Router DOM 7.0.2** - –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è
- **Material-UI (MUI) 6.2.0** - UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- **Redux Toolkit 2.3.0** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º
- **React Hook Form 7.54.0** - —Ä–∞–±–æ—Ç–∞ —Å —Ñ–æ—Ä–º–∞–º–∏
- **Axios 1.7.9** - HTTP –∫–ª–∏–µ–Ω—Ç

**–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏:**
- **Recharts 2.15.0** - –≥—Ä–∞—Ñ–∏–∫–∏ –∏ –¥–∏–∞–≥—Ä–∞–º–º—ã
- **date-fns 4.1.0** - —Ä–∞–±–æ—Ç–∞ —Å –¥–∞—Ç–∞–º–∏
- **react-to-print 3.0.4** - –ø–µ—á–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- **docxtemplater 3.57.1** - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è DOCX
- **papaparse 5.4.1** - –ø–∞—Ä—Å–∏–Ω–≥ CSV
- **Tabler Icons 3.26.0** - –∏–∫–æ–Ω–∫–∏

### **Backend**

**–°–µ—Ä–≤–µ—Ä –∏ API:**
- **Node.js v22.19.0** - —Å–µ—Ä–≤–µ—Ä–Ω–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞
- **Express 5.1.0** - –≤–µ–±-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫ (–ø–æ—Ä—Ç 3001)
- **PostgreSQL (Neon Cloud)** - –æ—Å–Ω–æ–≤–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

**–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:**
- **JWT (jsonwebtoken 9.0.2)** - —Ç–æ–∫–µ–Ω—ã –¥–æ—Å—Ç—É–ø–∞
- **bcrypt 5.1.1** - —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π
- **cookie-parser 1.4.7** - —Ä–∞–±–æ—Ç–∞ —Å cookies
- **cors 2.8.5** - CORS –ø–æ–ª–∏—Ç–∏–∫–∏

**–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–æ–¥—É–ª–∏:**
- **Nodemailer 6.9.16** + **Resend** - –æ—Ç–ø—Ä–∞–≤–∫–∞ email
- **multer 1.4.5-lts.1** - –∑–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤
- **swagger-jsdoc 6.2.8** - –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API

### **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**

**–°–£–ë–î:** PostgreSQL (Neon Cloud)
- **–•–æ—Å—Ç:** ep-polished-forest-agj7s875-pooler.c-2.eu-central-1.aws.neon.tech
- **–ë–∞–∑–∞:** neondb
- **–ü—É–ª —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π:** pg 8.13.1
- **SSL:** –≤–∫–ª—é—á–µ–Ω (sslmode=require)

**–û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã:**
```
users                    - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
tenants                  - –∫–æ–º–ø–∞–Ω–∏–∏ (—Ç–µ–Ω–∞–Ω—Ç—ã)
user_tenants             - —Å–≤—è–∑—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å –∫–æ–º–ø–∞–Ω–∏—è–º–∏
roles                    - —Ä–æ–ª–∏ (–≥–ª–æ–±–∞–ª—å–Ω—ã–µ –∏ —Ç–µ–Ω–∞–Ω—Ç–Ω—ã–µ)
permissions              - —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è (23+)
user_role_assignments    - –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ —Ä–æ–ª–µ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º
role_permissions         - —Å–≤—è–∑—å —Ä–æ–ª–µ–π –∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π

projects                 - –ø—Ä–æ–µ–∫—Ç—ã
estimates                - —Å–º–µ—Ç—ã
estimate_items           - –ø–æ–∑–∏—Ü–∏–∏ —Å–º–µ—Ç
estimate_templates       - —à–∞–±–ª–æ–Ω—ã —Å–º–µ—Ç

works                    - —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ —Ä–∞–±–æ—Ç
materials                - —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤
work_materials           - —Å–≤—è–∑—å —Ä–∞–±–æ—Ç –∏ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤
counterparties           - –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç—ã

global_purchases         - –æ–±—â–∏–µ –∑–∞–∫—É–ø–∫–∏
purchases                - –∑–∞–∫—É–ø–∫–∏ –ø–æ —Å–º–µ—Ç–∞–º
contracts                - –¥–æ–≥–æ–≤–æ—Ä—ã
work_completion_acts     - –∞–∫—Ç—ã –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö —Ä–∞–±–æ—Ç
schedules                - –≥—Ä–∞—Ñ–∏–∫–∏ —Ä–∞–±–æ—Ç
```

---

## üèóÔ∏è –ê–†–•–ò–¢–ï–ö–¢–£–†–ê –ü–†–û–ï–ö–¢–ê

### **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–ø–æ–∫**

```
vite/
‚îú‚îÄ‚îÄ app/                    # Frontend React –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ admin/             # –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ permissions/   # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è–º–∏
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ users/         # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
‚îÇ   ‚îú‚îÄ‚îÄ dashboard/         # –ì–ª–∞–≤–Ω–∞—è –ø–∞–Ω–µ–ª—å
‚îÇ   ‚îú‚îÄ‚îÄ projects/          # –ü—Ä–æ–µ–∫—Ç—ã –∏ —Å–º–µ—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ references/        # –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏ (—Ä–∞–±–æ—Ç—ã, –º–∞—Ç–µ—Ä–∏–∞–ª—ã)
‚îÇ   ‚îú‚îÄ‚îÄ purchases/         # –ó–∞–∫—É–ø–∫–∏
‚îÇ   ‚îî‚îÄ‚îÄ pages/            # –°—Ç—Ä–∞–Ω–∏—Ü—ã (–ª–æ–≥–∏–Ω, —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è)
‚îÇ
‚îú‚îÄ‚îÄ server/                 # Backend Node.js
‚îÇ   ‚îú‚îÄ‚îÄ controllers/       # –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã API
‚îÇ   ‚îú‚îÄ‚îÄ middleware/        # Middleware (auth, permissions)
‚îÇ   ‚îú‚îÄ‚îÄ config/           # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (–ë–î, Swagger)
‚îÇ   ‚îî‚îÄ‚îÄ routes/           # –ú–∞—Ä—à—Ä—É—Ç—ã
‚îÇ
‚îú‚îÄ‚îÄ api/                   # Vercel Serverless Functions
‚îÇ   ‚îî‚îÄ‚îÄ index.mjs         # –û—Å–Ω–æ–≤–Ω–∞—è —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ API
‚îÇ
‚îú‚îÄ‚îÄ shared/                # –û–±—â–∏–π –∫–æ–¥
‚îÇ   ‚îî‚îÄ‚îÄ lib/              # API –∫–ª–∏–µ–Ω—Ç—ã, —É—Ç–∏–ª–∏—Ç—ã
‚îÇ
‚îú‚îÄ‚îÄ public/               # –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã
‚îÇ   ‚îî‚îÄ‚îÄ favicon.png       # –ò–∫–æ–Ω–∫–∞ (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∫ –∞–≤–∞—Ç–∞—Ä–∫–∞)
‚îÇ
‚îî‚îÄ‚îÄ database-backups/     # –†–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏ –ë–î
```

### **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã**

**Frontend:**
- Component-based architecture (React)
- Centralized state management (Redux)
- API layer abstraction (axiosInstance)
- Material Design (MUI)

**Backend:**
- RESTful API
- Controller-Service pattern
- Middleware-based auth & permissions
- Transaction-based DB operations

**–û–±—â–µ–µ:**
- Multi-tenant SaaS architecture
- Role-Based Access Control (RBAC)
- JWT-based authentication
- Serverless deployment (Vercel)

---

## üîê –°–ò–°–¢–ï–ú–ê –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–ò

### **–†–æ–ª–∏ (3 —Ç–∏–ø–∞)**

**–ì–ª–æ–±–∞–ª—å–Ω—ã–µ —Ä–æ–ª–∏ (tenant_id = NULL):**
1. **super_admin** - –°—É–ø–µ—Ä-–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä
   - –ü–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ —Å–∏—Å—Ç–µ–º–µ
   - –£–ø—Ä–∞–≤–ª—è–µ—Ç –≥–ª–æ–±–∞–ª—å–Ω—ã–º–∏ —Ä–æ–ª—è–º–∏
   - –ù–µ –ø—Ä–∏–≤—è–∑–∞–Ω –∫ –∫–æ–º–ø–∞–Ω–∏–∏

2. **admin (template)** - –ì–ª–æ–±–∞–ª—å–Ω—ã–π —à–∞–±–ª–æ–Ω –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
   - –ö–æ–ø–∏—Ä—É–µ—Ç—Å—è –¥–ª—è –∫–∞–∂–¥–æ–π –Ω–æ–≤–æ–π –∫–æ–º–ø–∞–Ω–∏–∏
   - –†–µ–¥–∞–∫—Ç–∏—Ä—É–µ—Ç—Å—è super_admin

**–¢–µ–Ω–∞–Ω—Ç–Ω—ã–µ —Ä–æ–ª–∏ (–ø—Ä–∏–≤—è–∑–∞–Ω—ã –∫ –∫–æ–º–ø–∞–Ω–∏–∏):**
1. **admin** - –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –∫–æ–º–ø–∞–Ω–∏–∏
   - –£–ø—Ä–∞–≤–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ —Å–≤–æ–µ–π –∫–æ–º–ø–∞–Ω–∏–∏
   - –†–µ–¥–∞–∫—Ç–∏—Ä—É–µ—Ç —Ä–æ–ª–∏: manager, estimator, supplier

2. **manager** - –ú–µ–Ω–µ–¥–∂–µ—Ä
   - –£–ø—Ä–∞–≤–ª—è–µ—Ç –ø—Ä–æ–µ–∫—Ç–∞–º–∏ –∏ —Å–º–µ—Ç–∞–º–∏

3. **estimator** - –°–º–µ—Ç—á–∏–∫
   - –°–æ–∑–¥–∞–µ—Ç –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ—Ç —Å–º–µ—Ç—ã

4. **supplier** - –°–Ω–∞–±–∂–µ–Ω–µ—Ü
   - –£–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–∫—É–ø–∫–∞–º–∏ –∏ –º–∞—Ç–µ—Ä–∏–∞–ª–∞–º–∏

### **–†–∞–∑—Ä–µ—à–µ–Ω–∏—è (23+)**

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:** `resource.action`

**–†–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–µ —Ä–µ—Å—É—Ä—Å—ã:**
- **admin** - –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ (users, roles)
- **references** - –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏ (materials, works, counterparties)
- **projects** - –ü—Ä–æ–µ–∫—Ç—ã (estimates, estimate_templates, purchases)

**–î–µ–π—Å—Ç–≤–∏—è:**
- `view_menu` - –≤–∏–¥–∏–º–æ—Å—Ç—å –≤ –º–µ–Ω—é
- `read` / `view` - –ø—Ä–æ—Å–º–æ—Ç—Ä
- `create` - —Å–æ–∑–¥–∞–Ω–∏–µ
- `update` - —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- `delete` - —É–¥–∞–ª–µ–Ω–∏–µ

**–ò–µ—Ä–∞—Ä—Ö–∏—è —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π:**
```
admin.*
‚îú‚îÄ‚îÄ users.view_menu
‚îú‚îÄ‚îÄ users.read
‚îú‚îÄ‚îÄ users.create
‚îú‚îÄ‚îÄ users.update
‚îî‚îÄ‚îÄ users.delete

references.*
‚îú‚îÄ‚îÄ materials.view_menu
‚îú‚îÄ‚îÄ materials.read
‚îú‚îÄ‚îÄ works.view_menu
‚îî‚îÄ‚îÄ counterparties.view_menu

projects.*
‚îú‚îÄ‚îÄ estimates.read
‚îú‚îÄ‚îÄ purchases.view_menu
‚îî‚îÄ‚îÄ estimate_templates.view_menu
```

### **Middleware**

**authenticateToken** - –ø—Ä–æ–≤–µ—Ä–∫–∞ JWT —Ç–æ–∫–µ–Ω–∞
**checkPermission(resource, action)** - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π —Å —É—á—ë—Ç–æ–º –∏–µ—Ä–∞—Ä—Ö–∏–∏

---

## üöÄ DEPLOYMENT

### **Production**

**–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞:** Vercel
- **URL:** https://vite-pt47y0ymu-ilyas-projects-5a5f05a9.vercel.app
- **Vercel Token:** AzbO3kroECHEKi6JEnEFQgdj
- **Framework:** Vite
- **Build Command:** `npm run build`
- **Output Directory:** `dist`

**Serverless Functions:**
- Frontend: —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã –∏–∑ `dist/`
- Backend: `/api/index.mjs` (Express app)

**Environment Variables (.env.production):**
```env
DATABASE_URL=postgresql://neondb_owner:npg_z9nkcaAxB6ju@...
NEON_API_KEY=napi_aa0nrxrwc4g5h4g78ic1bnj3a1p1mvmllc62zyob4c25svobtr971jyavok7a8mn
VERCEL_TOKEN=AzbO3kroECHEKi6JEnEFQgdj
JWT_ACCESS_SECRET=your_super_secret_access_key_change_this_in_production_12345
JWT_REFRESH_SECRET=your_super_secret_refresh_key_change_this_in_production_67890
RESEND_API_KEY=re_2S3ZNHhd_9mCwZfkcVAD9Fmpq61fekM42
SENDER_EMAIL=noreply@smeta-lab.ru
FRONTEND_URL=https://smeta-lab.ru
```

### **Local Development**

**–ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞:**
```powershell
# Terminal 1: Backend (–ø–æ—Ä—Ç 3001)
npm run server

# Terminal 2: Frontend (–ø–æ—Ä—Ç 5173)
npm run dev
```

**–°–∫—Ä–∏–ø—Ç—ã package.json:**
```json
{
  "dev": "vite",
  "server": "node server/index.js",
  "build": "vite build",
  "preview": "vite preview"
}
```

### **Deploy –∫–æ–º–∞–Ω–¥–∞**

```powershell
cd vite
vercel --prod --yes --token AzbO3kroECHEKi6JEnEFQgdj
```

---

## üë• –£–ß–ï–¢–ù–´–ï –ó–ê–ü–ò–°–ò

### **Super Admin**
- **Email:** kiy026@yandex.ru
- **Password:** !!!Apsni09332
- **–†–æ–ª—å:** super_admin (–≥–ª–æ–±–∞–ª—å–Ω–∞—è)
- **–ö–æ–º–ø–∞–Ω–∏—è:** SMETA LAB

### **Tenant Admin**
- **Email:** i.sknewcity@gmail.com
- **Password:** !!!Apsni09332
- **–†–æ–ª—å:** admin (—Ç–µ–Ω–∞–Ω—Ç–Ω–∞—è)
- **–ö–æ–º–ø–∞–Ω–∏—è:** –û–û–û –°–ö –ù–æ–≤—ã–π –ì–æ—Ä–æ–¥

### **Manager**
- **Email:** kuzminilya026@gmail.com
- **Password:** !!!Apsni09332
- **–†–æ–ª—å:** manager
- **–ö–æ–º–ø–∞–Ω–∏—è:** –û–û–û –°–ö –ù–æ–≤—ã–π –ì–æ—Ä–æ–¥

---

## üìä –ö–õ–Æ–ß–ï–í–´–ï –û–°–û–ë–ï–ù–ù–û–°–¢–ò –†–ï–ê–õ–ò–ó–ê–¶–ò–ò

### **1. –ú—É–ª—å—Ç–∏—Ç–µ–Ω–∞–Ω—Ç–Ω–æ—Å—Ç—å**
- –ö–∞–∂–¥–∞—è –∫–æ–º–ø–∞–Ω–∏—è (tenant) –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–∞
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç –±—ã—Ç—å –≤ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∫–æ–º–ø–∞–Ω–∏—è—Ö
- –†–æ–ª–∏ –∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã –¥–ª—è –∫–∞–∂–¥–æ–π –∫–æ–º–ø–∞–Ω–∏–∏
- –î–∞–Ω–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—É—é—Ç—Å—è –ø–æ `tenant_id`

### **2. JWT –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è**
- Access Token (–∫–æ—Ä–æ—Ç–∫–∏–π —Å—Ä–æ–∫) + Refresh Token (–¥–ª–∏–Ω–Ω—ã–π —Å—Ä–æ–∫)
- Auto-refresh –ø—Ä–∏ –∏—Å—Ç–µ—á–µ–Ω–∏–∏ access token
- –í —Ç–æ–∫–µ–Ω–µ: `userId`, `email`, `tenantId`, `roles[]`, `permissions[]`

### **3. –ò–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∏–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è**
- –†–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ `admin.*` –¥–∞—ë—Ç –¥–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º `admin.*` –¥–µ–π—Å—Ç–≤–∏—è–º
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π –≤ middleware —á–µ—Ä–µ–∑ —Ä–µ–∫—É—Ä—Å–∏—é
- –í–∏–∑—É–∞–ª—å–Ω–∞—è –∏–µ—Ä–∞—Ä—Ö–∏—è –≤ UI —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è–º–∏

### **4. Email –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è**
- –û—Ç–ø—Ä–∞–≤–∫–∞ –∫–æ–¥–∞ —á–µ—Ä–µ–∑ Resend API
- –°—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è –∫–æ–¥–∞: 24 —á–∞—Å–∞
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö –∞–¥–º–∏–Ω–æ–º

### **5. –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ**
- –°–∫—Ä–∏–ø—Ç: `database-backups/create-backup.cjs`
- –§–æ—Ä–º–∞—Ç: `smeta_full_backup_YYYY-MM-DDTHH-mm-ss.sql`
- –í–∫–ª—é—á–∞–µ—Ç –≤—Å–µ —Ç–∞–±–ª–∏—Ü—ã –∏ –¥–∞–Ω–Ω—ã–µ

---

## üîß –ü–û–õ–ï–ó–ù–´–ï –ö–û–ú–ê–ù–î–´

### **–†–∞–±–æ—Ç–∞ —Å –ë–î**

```powershell
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–æ–ª–µ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
node vite/check-super-admin-roles.cjs

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö —Ä–æ–ª–µ–π
node vite/check-global-roles.cjs

# –¢–µ—Å—Ç –ª–æ–≥–∏–∫–∏ getAllRoles
node vite/test-get-all-roles.cjs

# –°–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏
node database-backups/create-backup.cjs
```

### **–û—Ç–ª–∞–¥–∫–∞**

```powershell
# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ —Å–µ—Ä–≤–µ—Ä–∞
npm run server

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ–∫–µ–Ω–∞
node vite/decode-jwt-token.cjs

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
node vite/check-user-permissions.cjs
```

---

## üìö –î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–Ø

- **API Swagger:** http://localhost:3001/api-docs
- **Permissions Reference:** `PERMISSIONS_REFERENCE.md`
- **Roles Architecture:** `ROLES_ARCHITECTURE.md`
- **Security Status:** `SECURITY_IMPLEMENTATION_STATUS.md`
- **Components List:** `COMPONENTS_LIST.md`

---

## üìù –ü–û–°–õ–ï–î–ù–ò–ï –ò–ó–ú–ï–ù–ï–ù–ò–Ø

**Deployment #117 (21.11.2025):**
1. ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ `rolesController.getAllRoles`
   - –ë—ã–ª–æ: –ø—Ä–æ–≤–µ—Ä–∫–∞ `roleKey === 'super_admin'` (–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ)
   - –°—Ç–∞–ª–æ: –ø—Ä–æ–≤–µ—Ä–∫–∞ `userRoles.includes('super_admin')` (–ø—Ä–∞–≤–∏–ª—å–Ω–æ)

2. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –¥–µ—Ñ–æ–ª—Ç–Ω–∞—è –∞–≤–∞—Ç–∞—Ä–∫–∞ `/favicon.png`
   - –ü—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   - –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º

3. ‚úÖ –£–ª—É—á—à–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–æ –≤—Å–µ—Ö –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞—Ö
   - –î–µ—Ç–∞–ª—å–Ω—ã–µ –ª–æ–≥–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è super_admin
   - –í—ã–≤–æ–¥ —Å–ø–∏—Å–∫–∞ —Ä–æ–ª–µ–π –≤ –∫–æ–Ω—Å–æ–ª—å

**–ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:**
- –ù–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –Ω–∞ —Ä–∞–∑–º–µ—Ä –∑–∞–≥—Ä—É–∂–∞–µ–º—ã—Ö —Ñ–∞–π–ª–æ–≤
- –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç rate limiting –¥–ª—è API
- Email –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞ (–º–æ–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å UX)

---

## üéØ ROADMAP

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1:**
- [ ] –°–∏—Å—Ç–µ–º–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π (–≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏)
- [ ] –≠–∫—Å–ø–æ—Ä—Ç —Å–º–µ—Ç –≤ Excel
- [ ] –®–∞–±–ª–æ–Ω—ã –ø–∏—Å–µ–º –¥–ª—è email

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2:**
- [ ] –ú–æ–±–∏–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è (responsive)
- [ ] Audit log (–∏—Å—Ç–æ—Ä–∏—è –¥–µ–π—Å—Ç–≤–∏–π)
- [ ] –î–≤—É—Ö—Ñ–∞–∫—Ç–æ—Ä–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (2FA)

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3:**
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å 1–°
- [ ] API –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö —Å–∏—Å—Ç–µ–º
- [ ] WebSocket –¥–ª—è real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π

---

## üìû –ö–û–ù–¢–ê–ö–¢–´

- **Production:** https://smeta-lab.ru
- **Vercel Dashboard:** https://vercel.com/ilyas-projects-5a5f05a9/vite
- **Database:** Neon PostgreSQL Dashboard
- **Email Support:** noreply@smeta-lab.ru

---

**–í–µ—Ä—Å–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞:** 1.0  
**–î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:** 21 –Ω–æ—è–±—Ä—è 2025 –≥.  
**–ê–≤—Ç–æ—Ä:** GitHub Copilot + Development Team
