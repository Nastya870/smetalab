# üöÄ –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏ - –ë—ã—Å—Ç—Ä–∞—è —à–ø–∞—Ä–≥–∞–ª–∫–∞

## üìä –¶–∏—Ñ—Ä—ã

```
–†–ê–ë–û–¢–´:    3,371 (100% –≥–ª–æ–±–∞–ª—å–Ω—ã–µ)
–ú–ê–¢–ï–†–ò–ê–õ–´: 46,976 (100% –≥–ª–æ–±–∞–ª—å–Ω—ã–µ)
–¢–ï–ù–ê–ù–¢–ù–´–ï: 0 (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å —Å–≤–æ–∏)
```

## üéØ –¢–∏–ø—ã —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–æ–≤

| –¢–∏–ø | is_global | tenant_id | –ö—Ç–æ –≤–∏–¥–∏—Ç | –ö—Ç–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ—Ç |
|-----|-----------|-----------|-----------|-----------------|
| üåç –ì–ª–æ–±–∞–ª—å–Ω—ã–µ | TRUE | NULL | –í—Å–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ | –¢–æ–ª—å–∫–æ –∞–¥–º–∏–Ω—ã |
| üè¢ –¢–µ–Ω–∞–Ω—Ç–Ω—ã–µ | FALSE | UUID | –¢–æ–ª—å–∫–æ —Å–≤–æ—è –æ—Ä–≥. | –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –æ—Ä–≥. |

## üé® UI –§–∏–ª—å—Ç—Ä—ã

```
[ –í—Å–µ ]  ‚Üí  –ì–ª–æ–±–∞–ª—å–Ω—ã–µ + –°–≤–æ–∏ —Ç–µ–Ω–∞–Ω—Ç–Ω—ã–µ  ‚Üí  isGlobal –Ω–µ –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è
[ üåç –ì–ª–æ–±–∞–ª—å–Ω—ã–µ ]  ‚Üí  –¢–æ–ª—å–∫–æ is_global=TRUE  ‚Üí  ?isGlobal=true
[ üè¢ –ú–æ–∏ ]  ‚Üí  –¢–æ–ª—å–∫–æ —Å–≤–æ–∏ —Ç–µ–Ω–∞–Ω—Ç–Ω—ã–µ  ‚Üí  ?isGlobal=false
```

## üì• CSV –§–æ—Ä–º–∞—Ç

### –†–∞–±–æ—Ç—ã (7 –ø–æ–ª–µ–π):
```csv
–ö–æ–¥;–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ;–ï–¥ –∏–∑–º;–ë–∞–∑–æ–≤–∞—è —Ü–µ–Ω–∞;–§–∞–∑–∞;–†–∞–∑–¥–µ–ª;–ü–æ–¥—Ä–∞–∑–¥–µ–ª
0-01;–î–µ–º–æ–Ω—Ç–∞–∂ –≤—ã—Ç—è–∂–∫–∏;—à—Ç;380.00;–≠—Ç–∞–ø ‚Ññ0;–î–µ–º–æ–Ω—Ç–∞–∂;–ë—ã—Ç–æ–≤–∞—è —Ç–µ—Ö–Ω–∏–∫–∞
```

### –ú–∞—Ç–µ—Ä–∏–∞–ª—ã (8 –ø–æ–ª–µ–π):
```csv
SKU;–ö–∞—Ç–µ–≥–æ—Ä–∏—è;–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ;–ï–¥ –∏–∑–º;–¶–µ–Ω–∞;–ü–æ—Å—Ç–∞–≤—â–∏–∫;–í–µ—Å;URL
–ú-01;–ì–∞–∑–æ–±–µ—Ç–æ–Ω;–ì–∞–∑–æ–±–µ—Ç–æ–Ω Istkult 50—Ö250—Ö625 –º–º D500;—à—Ç;185.00;–ü–µ—Ç—Ä–æ–≤–∏—á;11.5;https://...
```

**–í–∞–∂–Ω–æ:**
- ‚úÖ –†–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å: `;` (semicolon)
- ‚úÖ –ë–µ–∑ –∫–∞–≤—ã—á–µ–∫
- ‚úÖ BOM –¥–ª—è –∫–∏—Ä–∏–ª–ª–∏—Ü—ã

## üì§ –≠–∫—Å–ø–æ—Ä—Ç

| –§–∏–ª—å—Ç—Ä | –ò–º—è —Ñ–∞–π–ª–∞ | –°–æ–¥–µ—Ä–∂–∏–º–æ–µ |
|--------|-----------|------------|
| –í—Å–µ | `–≠–∫—Å–ø–æ—Ä—Ç_—Ä–∞–±–æ—Ç_2025-11-17.csv` | –ì–ª–æ–±–∞–ª—å–Ω—ã–µ + –°–≤–æ–∏ |
| –ì–ª–æ–±–∞–ª—å–Ω—ã–µ | `–≠–∫—Å–ø–æ—Ä—Ç_—Ä–∞–±–æ—Ç_–≥–ª–æ–±–∞–ª—å–Ω—ã–µ_2025-11-17.csv` | –¢–æ–ª—å–∫–æ –≥–ª–æ–±–∞–ª—å–Ω—ã–µ |
| –ú–æ–∏ | `–≠–∫—Å–ø–æ—Ä—Ç_—Ä–∞–±–æ—Ç_–º–æ–∏_2025-11-17.csv` | –¢–æ–ª—å–∫–æ —Å–≤–æ–∏ |

## üì• –ò–º–ø–æ—Ä—Ç

### –†–µ–∂–∏–º—ã:

**1. –î–æ–±–∞–≤–∏—Ç—å (mode: 'add')**
- –î–æ–±–∞–≤–ª—è–µ—Ç –Ω–æ–≤—ã–µ –∑–∞–ø–∏—Å–∏
- –ü—Ä–æ–ø—É—Å–∫–∞–µ—Ç –¥—É–±–ª–∏–∫–∞—Ç—ã –ø–æ –∫–æ–¥—É
- ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ

**2. –ó–∞–º–µ–Ω–∏—Ç—å (mode: 'replace')**
- ‚ö†Ô∏è –£–¥–∞–ª—è–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —Ç–∏–ø–∞
- –ó–∞–≥—Ä—É–∂–∞–µ—Ç –∏–∑ CSV
- –ü—Ä–∏ —Ñ–∏–ª—å—Ç—Ä–µ "–ú–æ–∏" ‚Üí —É–¥–∞–ª—è–µ—Ç —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏
- –ü—Ä–∏ —Ñ–∏–ª—å—Ç—Ä–µ "–ì–ª–æ–±–∞–ª—å–Ω—ã–µ" ‚Üí —É–¥–∞–ª—è–µ—Ç –≤—Å–µ –≥–ª–æ–±–∞–ª—å–Ω—ã–µ (—Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω)

## üîê RLS –ü–æ–ª–∏—Ç–∏–∫–∏

```sql
SELECT:  is_global=TRUE –ò–õ–ò tenant_id=—Å–≤–æ–π –ò–õ–ò –∞–¥–º–∏–Ω
INSERT:  —Ç–µ–Ω–∞–Ω—Ç–Ω—ã–µ ‚Üí —Å–≤–æ–π tenant_id, –≥–ª–æ–±–∞–ª—å–Ω—ã–µ ‚Üí —Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω
UPDATE:  —Å–≤–æ–∏ —Ç–µ–Ω–∞–Ω—Ç–Ω—ã–µ –ò–õ–ò (–≥–ª–æ–±–∞–ª—å–Ω—ã–µ –ò –∞–¥–º–∏–Ω)
DELETE:  —Å–≤–æ–∏ —Ç–µ–Ω–∞–Ω—Ç–Ω—ã–µ –ò–õ–ò (–≥–ª–æ–±–∞–ª—å–Ω—ã–µ –ò –∞–¥–º–∏–Ω)
```

## üöÄ API

### GET /api/works
```
?isGlobal=true     // –¢–æ–ª—å–∫–æ –≥–ª–æ–±–∞–ª—å–Ω—ã–µ
?isGlobal=false    // –¢–æ–ª—å–∫–æ —Ç–µ–Ω–∞–Ω—Ç–Ω—ã–µ
?search=—Ç–µ–∫—Å—Ç      // –ü–æ–∏—Å–∫
?page=1            // –ü–∞–≥–∏–Ω–∞—Ü–∏—è
?pageSize=100      // –î–æ 25,000
```

### POST /api/works
```json
{
  "code": "MY-001",
  "name": "–ú–æ—è —Ä–∞–±–æ—Ç–∞",
  "unit": "—à—Ç",
  "basePrice": 1500,
  "isGlobal": false,  // true —Ç–æ–ª—å–∫–æ –¥–ª—è –∞–¥–º–∏–Ω–∞
  "phase": "–≠—Ç–∞–ø ‚Ññ1",
  "section": "–†–∞–∑–¥–µ–ª",
  "subsection": "–ü–æ–¥—Ä–∞–∑–¥–µ–ª"
}
```

## üéØ –ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è

### –≠–∫—Å–ø–æ—Ä—Ç –≤—Å–µ–π –ë–î:
```bash
cd vite
node export-works-db.mjs
# –°–æ–∑–¥–∞—Å—Ç: –≠–∫—Å–ø–æ—Ä—Ç_—Ä–∞–±–æ—Ç_–ë–î_2025-11-17.csv
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã:
```bash
node check-works-structure.mjs
node check-materials-structure.mjs
```

### –°–æ–∑–¥–∞—Ç—å —Å–≤–æ—é —Ä–∞–±–æ—Ç—É:
```
UI ‚Üí –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏ ‚Üí –†–∞–±–æ—Ç—ã ‚Üí –î–æ–±–∞–≤–∏—Ç—å
‚Üí –ó–∞–ø–æ–ª–Ω–∏—Ç—å —Ñ–æ—Ä–º—É ‚Üí –°–æ—Ö—Ä–∞–Ω–∏—Ç—å
‚Üí –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ is_global=false, tenant_id=–≤–∞—à
```

### –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–≤–æ–∏ —Ä–∞–±–æ—Ç—ã:
```
UI ‚Üí –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏ ‚Üí –†–∞–±–æ—Ç—ã ‚Üí –ò–º–ø–æ—Ä—Ç
‚Üí –í—ã–±—Ä–∞—Ç—å —Ñ–∏–ª—å—Ç—Ä "–ú–æ–∏"
‚Üí –†–µ–∂–∏–º "–î–æ–±–∞–≤–∏—Ç—å"
‚Üí –í—ã–±—Ä–∞—Ç—å CSV ‚Üí –ò–º–ø–æ—Ä—Ç
```

## üìã –ò–µ—Ä–∞—Ä—Ö–∏—è —Ä–∞–±–æ—Ç

```
–§–∞–∑–∞ (phase)
  ‚îî‚îÄ –†–∞–∑–¥–µ–ª (section)
       ‚îî‚îÄ –ü–æ–¥—Ä–∞–∑–¥–µ–ª (subsection)

–ü—Ä–∏–º–µ—Ä—ã:
  –≠—Ç–∞–ø ‚Ññ0 ‚Üí –î–µ–º–æ–Ω—Ç–∞–∂ ‚Üí –ë—ã—Ç–æ–≤–∞—è —Ç–µ—Ö–Ω–∏–∫–∞
  –≠—Ç–∞–ø ‚Ññ1 ‚Üí –ß–µ—Ä–Ω–æ–≤–∞—è –æ—Ç–¥–µ–ª–∫–∞ ‚Üí –®—Ç—É–∫–∞—Ç—É—Ä–∫–∞
  –≠—Ç–∞–ø ‚Ññ2 ‚Üí –ß–∏—Å—Ç–æ–≤–∞—è –æ—Ç–¥–µ–ª–∫–∞ ‚Üí –ü–æ–∫—Ä–∞—Å–∫–∞
```

## üîç –ü–æ–∏—Å–∫

**–ü–æ–ª—è –¥–ª—è –ø–æ–∏—Å–∫–∞:**
- `code` - –ö–æ–¥ —Ä–∞–±–æ—Ç—ã
- `name` - –ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ
- `unit` - –ï–¥–∏–Ω–∏—Ü–∞ –∏–∑–º–µ—Ä–µ–Ω–∏—è
- `phase` - –§–∞–∑–∞
- `section` - –†–∞–∑–¥–µ–ª
- `subsection` - –ü–æ–¥—Ä–∞–∑–¥–µ–ª

**–†–µ–≥–∏—Å—Ç—Ä–æ–Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–π**, —Å —á–∞—Å—Ç–∏—á–Ω—ã–º —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ–º.

## üìä –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

```
–ó–∞–ø—Ä–æ—Å –∫ –ë–î:     ~700-900ms (3,371 –∑–∞–ø–∏—Å–µ–π)
–¢—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—è:   ~1-2ms
–û–±—â–µ–µ –≤—Ä–µ–º—è:     ~800ms
```

## üé® –í–∏–∑—É–∞–ª—å–Ω—ã–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã

```
üåç  IconWorld     - –ì–ª–æ–±–∞–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞/–º–∞—Ç–µ—Ä–∏–∞–ª
üè¢  IconBuilding  - –¢–µ–Ω–∞–Ω—Ç–Ω–∞—è —Ä–∞–±–æ—Ç–∞/–º–∞—Ç–µ—Ä–∏–∞–ª

Badges:
  [üåç –ì–ª–æ–±–∞–ª—å–Ω–∞—è]  - Chip primary outlined
  [üè¢ –ú–æ—è]         - Chip secondary outlined
```

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- `–°–ü–†–ê–í–û–ß–ù–ò–ö–ò_–°–ò–°–¢–ï–ú–ê.md` - –ü–æ–¥—Ä–æ–±–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- `–°–ü–†–ê–í–û–ß–ù–ò–ö–ò_–ò–¢–û–ì–ò.md` - –ü–æ–ª–Ω–∞—è —Å–≤–æ–¥–∫–∞ —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏
- `–°–ü–†–ê–í–û–ß–ù–ò–ö–ò_–®–ü–ê–†–ì–ê–õ–ö–ê.md` - –≠—Ç–æ—Ç —Ñ–∞–π–ª
- `CHANGELOG_CSV_IMPORT.md` - –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π CSV
- `CHANGELOG_REMOVE_CATEGORY.md` - –£–¥–∞–ª–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 17 –Ω–æ—è–±—Ä—è 2025  
**–í–µ—Ä—Å–∏—è:** v1.17
