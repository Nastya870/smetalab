<!DOCTYPE html>
<html>
<head>
  <title>Keep Render Alive</title>
  <meta name="robots" content="noindex">
</head>
<body>
  <h1>üîÑ Backend Keep-Alive Service</h1>
  <p>Status: <span id="status">Initializing...</span></p>
  <p>Last ping: <span id="lastPing">-</span></p>
  <p>Next ping in: <span id="countdown">-</span></p>

  <script>
    const BACKEND_URL = import.meta.env.VITE_API_URL || 'https://smeta-backend.onrender.com';
    const PING_INTERVAL = 10 * 60 * 1000; // 10 –º–∏–Ω—É—Ç
    let nextPingTime = null;

    async function pingBackend() {
      try {
        document.getElementById('status').textContent = 'Pinging...';
        const response = await fetch(`${BACKEND_URL}/api/health`);
        const data = await response.json();
        
        document.getElementById('status').textContent = '‚úÖ Online';
        document.getElementById('lastPing').textContent = new Date().toLocaleString();
        nextPingTime = Date.now() + PING_INTERVAL;
        
        console.log('‚úÖ Backend pinged successfully:', data);
      } catch (error) {
        document.getElementById('status').textContent = '‚ùå Error: ' + error.message;
        console.error('‚ùå Ping failed:', error);
      }
    }

    function updateCountdown() {
      if (nextPingTime) {
        const remaining = Math.max(0, Math.floor((nextPingTime - Date.now()) / 1000));
        const minutes = Math.floor(remaining / 60);
        const seconds = remaining % 60;
        document.getElementById('countdown').textContent = `${minutes}m ${seconds}s`;
      }
    }

    // –ü–µ—Ä–≤—ã–π –ø–∏–Ω–≥ —Å—Ä–∞–∑—É
    pingBackend();
    
    // –ü–æ–≤—Ç–æ—Ä—è—é—â–∏–π—Å—è –ø–∏–Ω–≥
    setInterval(pingBackend, PING_INTERVAL);
    
    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–∞–π–º–µ—Ä–∞ –∫–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É
    setInterval(updateCountdown, 1000);
  </script>
</body>
</html>
