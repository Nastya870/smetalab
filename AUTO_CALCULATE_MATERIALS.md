# ü§ñ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á—ë—Ç –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –∏–∑ —à–∞–±–ª–æ–Ω–æ–≤

## üìã –ü—Ä–æ–±–ª–µ–º–∞

–†–∞–Ω—å—à–µ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Å–º–µ—Ç—ã –∏–∑ —à–∞–±–ª–æ–Ω–∞:
- **–®–∞–±–ª–æ–Ω**: –†–∞–±–æ—Ç–∞ 100 –º¬≤ ‚Üí –ö–ª–µ–π 15 —à—Ç (—Ä–∞—Å—Å—á–∏—Ç–∞–Ω–æ –≤—Ä—É—á–Ω—É—é)
- **–ù–æ–≤–∞—è —Å–º–µ—Ç–∞**: –†–∞–±–æ—Ç–∞ 50 –º¬≤ ‚Üí –ö–ª–µ–π –≤—Å—ë —Ä–∞–≤–Ω–æ 15 —à—Ç ‚ùå (–Ω–µ –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è)

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

–¢–µ–ø–µ—Ä—å —Å–∏—Å—Ç–µ–º–∞ **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã—á–∏—Å–ª—è–µ—Ç –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç —Ä–∞—Å—Ö–æ–¥–∞** –ø—Ä–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–∏ —à–∞–±–ª–æ–Ω–∞.

### –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã

#### 1Ô∏è‚É£ **–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞** (Backend)

–ö–æ–≥–¥–∞ —Å–æ–∑–¥–∞—ë—Ç—Å—è —Å–º–µ—Ç–∞ –∏–∑ —à–∞–±–ª–æ–Ω–∞, –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –º–∞—Ç–µ—Ä–∏–∞–ª–∞ –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è:

```sql
consumption_coefficient = CEIL((–º–∞—Ç–µ—Ä–∏–∞–ª_–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ / —Ä–∞–±–æ—Ç–∞_–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ) √ó 10) / 10
quantity = CEIL(–º–∞—Ç–µ—Ä–∏–∞–ª_–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ)
auto_calculate = true
```

**–ü—Ä–∏–º–µ—Ä**:
- –†–∞–±–æ—Ç–∞ –≤ —à–∞–±–ª–æ–Ω–µ: **100 –º¬≤**
- –ö–ª–µ–π –≤ —à–∞–±–ª–æ–Ω–µ: **14.3 —à—Ç** ‚Üí –æ–∫—Ä—É–≥–ª—è–µ—Ç—Å—è –¥–æ **15 —à—Ç**
- **–ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç**: (15 / 100) √ó 10 = 1.5 ‚Üí CEIL(1.5) = **0.2** (–æ–∫—Ä—É–≥–ª–µ–Ω–∏–µ –¥–æ –¥–µ—Å—è—Ç—ã—Ö –≤–≤–µ—Ä—Ö)

```javascript
// server/controllers/estimateTemplatesController.js
consumption_coefficient = CEIL((quantity / work_quantity) * 10) / 10.0
// –ü—Ä–∏–º–µ—Ä—ã:
// 0.14 ‚Üí 0.2
// 0.15 ‚Üí 0.2
// 0.21 ‚Üí 0.3
```

#### 2Ô∏è‚É£ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ—Å—á—ë—Ç** (Frontend)

–ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ä–∞–±–æ—Ç—ã –º–∞—Ç–µ—Ä–∏–∞–ª—ã –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞—é—Ç—Å—è:

```javascript
// app/estimates/EstimateWithSidebar.jsx
if (material.auto_calculate === true) {
  newQuantity = Math.ceil(—Ä–∞–±–æ—Ç–∞_–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ √ó consumption_coefficient)
  
  // –ü—Ä–∏–º–µ—Ä: 50 –º¬≤ √ó 0.2 = 10.0 ‚Üí CEIL = 10 —à—Ç
  // –ü—Ä–∏–º–µ—Ä: 53 –º¬≤ √ó 0.2 = 10.6 ‚Üí CEIL = 11 —à—Ç
}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç –≤ —Ç–∞–±–ª–∏—Ü–µ**:
| –†–∞–±–æ—Ç–∞ | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ | –ú–∞—Ç–µ—Ä–∏–∞–ª | –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç | –ö–æ–ª-–≤–æ –º–∞—Ç–µ—Ä–∏–∞–ª–∞ |
|--------|-----------|----------|-------------|------------------|
| –ú–æ–Ω—Ç–∞–∂ | **50 –º¬≤** | –ö–ª–µ–π | 0.2 | **10 —à—Ç** ‚úÖ |
| –ú–æ–Ω—Ç–∞–∂ | **53 –º¬≤** | –ö–ª–µ–π | 0.2 | **11 —à—Ç** ‚úÖ (–æ–∫—Ä—É–≥–ª–µ–Ω–∏–µ –≤–≤–µ—Ä—Ö) |
| –ú–æ–Ω—Ç–∞–∂ | **100 –º¬≤** | –ö–ª–µ–π | 0.2 | **20 —à—Ç** ‚úÖ |

### üìä –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ UI

**–ö–æ–ª–æ–Ω–∫–∞ "–†–∞—Å—Ö–æ–¥"** –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤—ã—á–∏—Å–ª–µ–Ω–Ω—ã–π –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç (–æ–∫—Ä—É–≥–ª—ë–Ω–Ω—ã–π –¥–æ –¥–µ—Å—è—Ç—ã—Ö –≤–≤–µ—Ä—Ö):
- **0.2** - –Ω–∞ –∫–∞–∂–¥—É—é –µ–¥–∏–Ω–∏—Ü—É —Ä–∞–±–æ—Ç—ã –Ω—É–∂–Ω–æ 0.2 –µ–¥–∏–Ω–∏—Ü –º–∞—Ç–µ—Ä–∏–∞–ª–∞
- **0.3** - –Ω–∞ –∫–∞–∂–¥—É—é –µ–¥–∏–Ω–∏—Ü—É —Ä–∞–±–æ—Ç—ã –Ω—É–∂–Ω–æ 0.3 –µ–¥–∏–Ω–∏—Ü –º–∞—Ç–µ—Ä–∏–∞–ª–∞
- –ú–æ–∂–Ω–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Ä—É—á–Ω—É—é (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∏–∑–º–µ–Ω–∏—Ç—å –Ω–∞ **0.4** –¥–ª—è –∑–∞–ø–∞—Å–∞)

**–ö–æ–ª–æ–Ω–∫–∞ "–ö–æ–ª-–≤–æ"** –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–∞—Ç–µ—Ä–∏–∞–ª–∞ (–æ–∫—Ä—É–≥–ª—ë–Ω–Ω–æ–µ –≤–≤–µ—Ä—Ö –¥–æ —Ü–µ–ª–æ–≥–æ):
- **10 —à—Ç** - —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Ä–∞—Å—á—ë—Ç–∞ 50 √ó 0.2 = 10
- **11 —à—Ç** - —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Ä–∞—Å—á—ë—Ç–∞ 53 √ó 0.2 = 10.6 ‚Üí –æ–∫—Ä—É–≥–ª–µ–Ω–æ –¥–æ 11

### üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

#### Backend:
1. **estimateTemplatesController.js**:
   - –í—ã—á–∏—Å–ª–µ–Ω–∏–µ `consumption_coefficient` –ø—Ä–∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–∏ –∏–∑ —à–∞–±–ª–æ–Ω–∞
   - –£—Å—Ç–∞–Ω–æ–≤–∫–∞ `auto_calculate = true`

2. **estimatesRepository.js**:
   - SELECT —Ç–µ–ø–µ—Ä—å –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `auto_calculate`
   - INSERT —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç `auto_calculate`

3. **estimateItemsRepository.js**:
   - –í—Å–µ INSERT –∑–∞–ø—Ä–æ—Å—ã –≤–∫–ª—é—á–∞—é—Ç `auto_calculate`

#### Frontend:
–õ–æ–≥–∏–∫–∞ —É–∂–µ –±—ã–ª–∞ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Ä–∞–Ω–µ–µ:
- –ú–∞—Ç–µ—Ä–∏–∞–ª—ã —Å `auto_calculate = true` –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- –ú–∞—Ç–µ—Ä–∏–∞–ª—ã —Å `auto_calculate = false` –æ—Å—Ç–∞—é—Ç—Å—è —Å—Ç–∞—Ç–∏—á–Ω—ã–º–∏ (—Ä—É—á–Ω–æ–π –≤–≤–æ–¥)

### üéØ –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

#### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –°–æ–∑–¥–∞–Ω–∏–µ —Å–º–µ—Ç—ã –∏–∑ —à–∞–±–ª–æ–Ω–∞
1. –í—ã–±–∏—Ä–∞–µ–º —à–∞–±–ª–æ–Ω "–û—Ç–¥–µ–ª–∫–∞ –ø–æ–º–µ—â–µ–Ω–∏—è"
2. –í —à–∞–±–ª–æ–Ω–µ: –®—Ç—É–∫–∞—Ç—É—Ä–∫–∞ 100 –º¬≤ ‚Üí –°–º–µ—Å—å 143 –∫–≥
3. –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è: 143/100 = 1.43 ‚Üí –æ–∫—Ä—É–≥–ª–µ–Ω–∏–µ –¥–æ –¥–µ—Å—è—Ç—ã—Ö –≤–≤–µ—Ä—Ö ‚Üí **1.5**
4. –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–∫—Ä—É–≥–ª—è–µ—Ç—Å—è –≤–≤–µ—Ä—Ö: 143 ‚Üí **143 –∫–≥**
5. –ü—Ä–∏–º–µ–Ω—è–µ–º –∫ –ø—Ä–æ–µ–∫—Ç—É –ø–ª–æ—â–∞–¥—å—é 60 –º¬≤
6. **–†–µ–∑—É–ª—å—Ç–∞—Ç**: –®—Ç—É–∫–∞—Ç—É—Ä–∫–∞ 60 –º¬≤ ‚Üí –°–º–µ—Å—å **90 –∫–≥** (60 √ó 1.5 = 90)

#### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è
1. –ò–∑–º–µ–Ω—è–µ–º –ø–ª–æ—â–∞–¥—å —Ä–∞–±–æ—Ç—ã —Å 60 –º¬≤ –Ω–∞ 73 –º¬≤
2. –†–∞—Å—á—ë—Ç: 73 √ó 1.5 = 109.5
3. **–†–µ–∑—É–ª—å—Ç–∞—Ç**: –°–º–µ—Å—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ—Å—á–∏—Ç–∞–µ—Ç—Å—è –Ω–∞ **110 –∫–≥** (–æ–∫—Ä—É–≥–ª–µ–Ω–∏–µ –≤–≤–µ—Ä—Ö)

#### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –†—É—á–Ω–∞—è –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–∞
1. –í–∏–¥–∏–º –≤ –∫–æ–ª–æ–Ω–∫–µ "–†–∞—Å—Ö–æ–¥" –∑–Ω–∞—á–µ–Ω–∏–µ **1.5**
2. –†–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º –Ω–∞ **1.8** (–¥–æ–±–∞–≤–ª—è–µ–º –∑–∞–ø–∞—Å)
3. –ü—Ä–∏ 75 –º¬≤ –ø–æ–ª—É—á–∏–º: 75 √ó 1.8 = 135 ‚Üí **135 –∫–≥**

### üõ°Ô∏è –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

- ‚úÖ **–°—Ç–∞—Ä—ã–µ —Å–º–µ—Ç—ã** - –Ω–µ –∑–∞—Ç—Ä–∞–≥–∏–≤–∞—é—Ç—Å—è, —Ä–∞–±–æ—Ç–∞—é—Ç –∫–∞–∫ —Ä–∞–Ω—å—à–µ
- ‚úÖ **–†—É—á–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã** - –µ—Å–ª–∏ –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤—Ä—É—á–Ω—É—é (–Ω–µ –∏–∑ —à–∞–±–ª–æ–Ω–∞), `auto_calculate = false`
- ‚úÖ **–®–∞–±–ª–æ–Ω—ã** - –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ —à–∞–±–ª–æ–Ω–∞ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –∑–∞–Ω–æ–≤–æ

### üìà –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

1. **–≠–∫–æ–Ω–æ–º–∏—è –≤—Ä–µ–º–µ–Ω–∏** - –Ω–µ –Ω—É–∂–Ω–æ –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞—Ç—å –º–∞—Ç–µ—Ä–∏–∞–ª—ã –≤—Ä—É—á–Ω—É—é
2. **–¢–æ—á–Ω–æ—Å—Ç—å** - –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã –≤—ã—á–∏—Å–ª—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å –æ–∫—Ä—É–≥–ª–µ–Ω–∏–µ–º –¥–æ –¥–µ—Å—è—Ç—ã—Ö
3. **–ó–∞–ø–∞—Å –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤** - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤—Å–µ–≥–¥–∞ –æ–∫—Ä—É–≥–ª—è–µ—Ç—Å—è –≤–≤–µ—Ä—Ö (1.3 ‚Üí 2, 1.7 ‚Üí 2)
4. **–ì–∏–±–∫–æ—Å—Ç—å** - –º–æ–∂–Ω–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã –≤—Ä—É—á–Ω—É—é
5. **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å** - –ª–µ–≥–∫–æ –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–º–µ—Ç—ã –ø–æ–¥ —Ä–∞–∑–Ω—ã–µ –æ–±—ä—ë–º—ã

### üî¢ –ü—Ä–∏–º–µ—Ä—ã –æ–∫—Ä—É–≥–ª–µ–Ω–∏—è

**–ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç —Ä–∞—Å—Ö–æ–¥–∞ (–¥–æ –¥–µ—Å—è—Ç—ã—Ö –≤–≤–µ—Ä—Ö)**:
- 0.14 ‚Üí **0.2**
- 0.15 ‚Üí **0.2**
- 0.21 ‚Üí **0.3**
- 1.43 ‚Üí **1.5**
- 1.56 ‚Üí **1.6**

**–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–∞—Ç–µ—Ä–∏–∞–ª–∞ (–¥–æ —Ü–µ–ª–æ–≥–æ –≤–≤–µ—Ä—Ö)**:
- 10.1 ‚Üí **11**
- 10.5 ‚Üí **11**
- 10.9 ‚Üí **11**
- 53.2 ‚Üí **54**
- 99.1 ‚Üí **100**

---

**–í–µ—Ä—Å–∏—è**: 1.0  
**–î–∞—Ç–∞**: 27 –¥–µ–∫–∞–±—Ä—è 2025 –≥.  
**–ö–æ–º–º–∏—Ç**: `912fda5`
